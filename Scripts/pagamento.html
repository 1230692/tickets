<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Detalhes | Pagamento do Produto</title>
    <style>
        body {
            font-family: Arial;
            margin: 0;
            padding: 10px;
            background-color: #52616b;
        }
        .container {
            display: flex;
            justify-content: space-between;
        }
        .detalhes, .cartaz {
            padding: 25px;
            width: 48%;
            box-sizing: border-box;
            background-color: #f0f0f0;
            border-radius: 10px;
        }
        .detalhes h2, .cartaz h2 {
            text-align: center;
            background-color: #00CFC8;
            color: white;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-radius: 10px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 2px solid rgb(164, 162, 162);
            border-radius: 5px;
        }
        .form-group input[type="text"], .form-group input[type="email"] {
            height: 30px;
        }
        .form-group textarea {
            height: 60px;
        }
        .form-group .cartaz-quadrado {
            width: 20%;
            padding-top: 30%;
            position: relative;
            background-color: #52616b;
            border: 1px solid #f0f0f0;
            border-radius: 5px;
            overflow: auto;
        }
        .form-group .cartaz-quadrado img {
            display: block;
            margin: 4px;
            position: absolute;
            top: 0;
            left: 0;
            width: 95%;
            height: 95%;
            object-fit: fill;
        }
        .button-group {
            text-align: center;
        }
        .button-group button {
            background-color: #00CFC8;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .button-group button:hover {
            background-color: rgb(50, 50, 50);
        }
        .compra {
            border: 1px solid #52616b;
            padding: 20px;
            margin-top: 20px;
            box-sizing: border-box;
            background-color: #f0f0f0;
            border-radius: 10px;
        }
        .compra h2 {
            text-align: center;
            background-color: #00CFC8;
            color: white;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-radius: 10px;
        }
        .payment-methods {
            display: flex;
            justify-content: space-around;
            margin: 10px ;
        }
        .payment-methods label {
            display: block;
            text-align: center;
        }
        .payment-methods input {
            margin-top: 10px;
        }
        #senha-vendedor {
            margin-bottom: 20px;
        }
        .hidden {
            display: none;
        }
        .status {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #00CFC8;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
        }
        #senha-container{
            color: white;
            display: flex;
            justify-content: center;
        align-items: center;
        background-color: #00CFC8;
        border: 1px solid #ccc;
        border-radius: 10px;
        margin: 0 auto;
        padding: 20px;
        width: 300px;
        }
    </style>
</head>
<body onload="carregarDados()">
    <div id="senha-vendedor">
        <div id="senha-container">
        <label for="senha">Senha do Vendedor:</label>
        <input type="password" id="senha" placeholder="Insira a senha">
        <button onclick="verificarSenha()">Entrar</button>
    </div>
    </div>
    <div class="status" id="status-area">Área do Cliente</div>
    <div class="container">
        <div class="detalhes">
            
            <h2>Detalhes do Produto</h2>
            <div class="form-group">
                <label for="promotor">Promotor:</label>
                <input type="text" id="promotor" name="promotor" placeholder="Promotor" readonly>
            </div>
            <div class="form-group">
                <label for="duracao">Duração:</label>
                <input type="text" id="duracao" name="duracao" placeholder="Duração" readonly>
            </div>
            <div class="form-group">
                <label for="introducao">Breve introdução:</label>
                <textarea id="introducao" name="introducao" placeholder="Breve introdução do evento" readonly></textarea>
            </div>
            <div class="form-group">
                <label for="sinopse">Sinopse:</label>
                <textarea id="sinopse" name="sinopse" placeholder="Sinopse do evento" readonly></textarea>
            </div>
            <div class="form-group">
                <label for="cartaz">Cartaz:</label>
                <div class="cartaz-quadrado">
                    <img src="logo.jpeg" alt="Cartaz do Evento" width="50%">
                </div>
            </div>
        </div>
        
        <div class="cartaz">
            <h2>Cartaz do Evento</h2>
            <div class="form-group">
                <label for="nome_evento">Nome do Evento:</label>
                <input type="text" id="nome_evento" name="nome_evento" placeholder="Nome do Evento" readonly>
            </div>
            <div class="form-group">
                <label for="inicio">Início:</label>
                <input type="text" id="inicio" name="inicio" placeholder="Início" readonly>
            </div>
            <div class="form-group">
                <label for="fim">Fim:</label>
                <input type="text" id="fim" name="fim" placeholder="Fim" readonly>
            </div>
            <div class="form-group">
                <label for="horario">Horário:</label>
                <input type="text" id="horario" name="horario" placeholder="Horário" readonly>
            </div>
            <div class="form-group">
                <label for="classificacao">Classificação Etária:</label>
                <input type="text" id="classificacao" name="classificacao" placeholder="Classificação Etária" readonly>
            </div>
            <div class="form-group">
                <label for="preco">Preço:</label>
                <input type="text" id="preco" name="preco" placeholder="Preço" readonly>
            </div>
        </div>
    </div>

    <div class="compra">
        <h2>Compra de Bilhetes</h2>
        <form id="form-compra" action="processar_pagamento.php" method="post" onsubmit="redirecionarPagamento()"></form>
        <form action="processar_pagamento.php" method="post">
            <div class="form-group">
                <label for="quantidade">Quantidade:</label>
                <input type="text" id="quantidade" name="quantidade_bilhete" placeholder="Quantidade" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Email" required>
            </div>
            <div class="payment-methods">
                <div>
                    <label for="mbway">
                        <input type="radio" id="mbway" name="pagamento" value="MBWAY" required>
                        <img src="MBWAY.jpeg" width="60" height="45" alt="MBWAY">
                        MBWAY
                    </label>
                </div>
                <div>
                    <label for="paypal">
                        <input type="radio" id="paypal" name="pagamento" value="PAYPAL" required>
                        <img src="PAYPAL.jpeg" width="50" height="40" alt="PAYPAL">
                        PAYPAL
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="telemovel">Telemóvel:</label>
                <input type="text" id="telemovel" name="telemovel" placeholder="Telemóvel" required>
            </div>
            <div class="form-group">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" placeholder="Nome" required>
            </div>
        </form>
        <div class="button-group">
            <button id="botao-comprar">COMPRAR</button>
        </div>
    </div>

    <div class="button-group hidden" id="submit-changes">
        <button onclick="alterarMudanca()">Submeter Alterações</button>
        <button onclick="voltarCliente()">Voltar para Cliente</button>
    </div>

    <script>
        function verificarSenha() {
            const senha = document.getElementById('senha').value;
            if (senha === 'DEAPC') {
                entrarVendedor();
            } else {
                alert('Senha incorreta!');
            }
        }

        function entrarVendedor() {
            const elementos = document.querySelectorAll('.detalhes input, .detalhes textarea, .cartaz input, .cartaz textarea');
            elementos.forEach(elemento => {
                elemento.readOnly = false;
            });
            document.getElementById('status-area').textContent = 'Área do Vendedor';
            document.getElementById('submit-changes').classList.remove('hidden');
            document.getElementById('senha-vendedor').classList.remove('hidden');
        }

        document.getElementById('telemovel').addEventListener('input', function() {
    // Remove todos os caracteres que não são números , /\D/ é uma expressao que corresponde a todos
    // os caracteres que nao sao digitos, e o "g" indica que a substituicao deve ser feita globalmente em toda a string
    this.value = this.value.replace(/\D/g, '');

    // Limita o número de caracteres a 9
    if (this.value.length > 9) {
        this.value = this.value.slice(0, 9);
    }
    });

    document.getElementById('botao-comprar').addEventListener('click', function(event) {
        event.preventDefault(); // Evita que o formulário seja enviado automaticamente

        const metodoPagamento = document.querySelector('input[name="pagamento"]:checked').value;
        if (metodoPagamento === 'MBWAY') {
            window.location.href = 'https://www.mbway.pt';
        } else if (metodoPagamento === 'PAYPAL') {
            window.location.href = 'https://www.paypal.com/pt/home';
        }
    });

        function alterarMudanca() {
            const dados = {
                promotor: document.getElementById('promotor').value,
                duracao: document.getElementById('duracao').value,
                introducao: document.getElementById('introducao').value,
                sinopse: document.getElementById('sinopse').value,
                nome_evento: document.getElementById('nome_evento').value,
                inicio: document.getElementById('inicio').value,
                fim: document.getElementById('fim').value,
                horario: document.getElementById('horario').value,
                classificacao: document.getElementById('classificacao').value,
                preco: document.getElementById('preco').value
            };
            localStorage.setItem('dadosEvento', JSON.stringify(dados)); //transforma o objeto dadosEvento em string dados
            alert('Alterações submetidas com sucesso!');
        }

        function carregarDados() {
            const dados = JSON.parse(localStorage.getItem('dadosEvento'));
            if (dados) {
                document.getElementById('promotor').value = dados.promotor;
                document.getElementById('duracao').value = dados.duracao;
                document.getElementById('introducao').value = dados.introducao;
                document.getElementById('sinopse').value = dados.sinopse;
                document.getElementById('nome_evento').value = dados.nome_evento;
                document.getElementById('inicio').value = dados.inicio;
                document.getElementById('fim').value = dados.fim;
                document.getElementById('horario').value = dados.horario;
                document.getElementById('classificacao').value = dados.classificacao;
                document.getElementById('preco').value = dados.preco;
            }
        }

        function alterarMudanca() {
        const dadosAtuais = {
        promotor: document.getElementById('promotor').value,
        duracao: document.getElementById('duracao').value,
        introducao: document.getElementById('introducao').value,
        sinopse: document.getElementById('sinopse').value,
        nome_evento: document.getElementById('nome_evento').value,
        inicio: document.getElementById('inicio').value,
        fim: document.getElementById('fim').value,
        horario: document.getElementById('horario').value,
        classificacao: document.getElementById('classificacao').value,
        preco: document.getElementById('preco').value
    };

    const dadosAntigos = JSON.parse(localStorage.getItem('dadosEvento'));

    if (JSON.stringify(dadosAtuais) === JSON.stringify(dadosAntigos)) {
        alert('Nenhuma alteração foi feita.');
        return;
    }

    localStorage.setItem('dadosEvento', JSON.stringify(dadosAtuais));
    alert('Alterações submetidas com sucesso!');
}

function voltarCliente() {
    const dadosAtuais = {
        promotor: document.getElementById('promotor').value,
        duracao: document.getElementById('duracao').value,
        introducao: document.getElementById('introducao').value,
        sinopse: document.getElementById('sinopse').value,
        nome_evento: document.getElementById('nome_evento').value,
        inicio: document.getElementById('inicio').value,
        fim: document.getElementById('fim').value,
        horario: document.getElementById('horario').value,
        classificacao: document.getElementById('classificacao').value,
        preco: document.getElementById('preco').value
    };

    const dadosAntigos = JSON.parse(localStorage.getItem('dadosEvento'));

    if (JSON.stringify(dadosAtuais) === JSON.stringify(dadosAntigos)) {
        alert('Nenhuma alteração foi feita.');
        window.location.href = 'file:///Users/tiago.04.cruz/Faculdade/1%C2%BAAno-%202%C2%BASemestre/DEAPC/Trabalho%20Pr%C3%A1tico/detalhes%20%7C%20pagamento%20produto.html';
        return;
    }

    const confirmacao = confirm('Deseja descartar as alterações e voltar para a página do cliente?');
    if (confirmacao) {
        window.location.href = 'file:///Users/tiago.04.cruz/Faculdade/1%C2%BAAno-%202%C2%BASemestre/DEAPC/Trabalho%20Pr%C3%A1tico/detalhes%20%7C%20pagamento%20produto.html';
    }
}
    </script>
</body>
</html>
